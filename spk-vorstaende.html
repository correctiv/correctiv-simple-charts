<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <link rel="stylesheet" href="https://correctiv.org/static/CACHE/css/fd09e0dfcaae.css" type="text/css">
  <title>correctiv-simple-charts</title>
</head>
<body>
  <h1>Sparkassen-Vorstandsgehälter</h1>
  <h2>Visualisierungen</h2>
  <ol>
    <li><a href="#karte">Karte absolutes Gesamtgehalt</a></li>
    <li><a href="#vorstaende-chart--1">Durchschnittsgehalt im Vergleich zur Größe der Sparkasse</a></li>
    <li><a href="#vorstaende-chart--2">Durchschnittsgehalts-Niveau Vergleich NRW &amp; Bayern</a></li>
    <li><a href="#vorstaende-chart--3">Quote erfolgsabhängige Bezüge Vergleich NRW &amp; Hessen</a></li>
  </ol>

  <h2>Karte absolutes Gesamtgehalt</h2>
  <iframe id="karte" width="100%" height="700" src="https://correctiv.github.io/sparkassen-maps-reusable/vorstandsgehaelter.html"></iframe>

  <h2>Durchschnittsgehalt im Vergleich zur Größe der Sparkasse</h2>
  <section class="simple-charts">
    <section id="vorstaende-chart--1"></section>
  </section>

  <h2>Durchschnittsgehalts-Niveau Vergleich NRW &amp; Bayern</h2>
  <section class="simple-charts">
    <section id="vorstaende-chart--2"></section>
  </section>

  <h2>Quote erfolgsabhängige Bezüge Vergleich NRW &amp; Hessen</h2>
  <p>Rot: NRW, Blau: Hessen</p>
  <section class="simple-charts">
    <section id="vorstaende-chart--3"></section>
  </section>

  <script src="https://correctiv.org/static/vendor/d3/d3.min.js"></script>
  <script src="https://cdn.rawgit.com/novus/nvd3/v1.8.1/build/nv.d3.min.js"></script>
  <script src="dist/correctiv-simple-charts.min.js"></script>
  <script type="text/javascript">

var correctivColors = {
  red: '#c81455',
  blue: '#477ba9'
};

renderChart({
  selector: '#vorstaende-chart--1',
  kind: 'scatterChart',
  dataUrl: 'data/sample.csv',
  chart: {
    height: '600px',
    zoom: {
      active: true
    },
    tooltip: {
      labelCol: 'sparkasse',
      bodyTempl: '<dl>\
        <dt>Durchschnittsgehalt</dt><dd>{durchschnittsgehalt_2014}</dd>\
        <dt>Gesamtbezüge</dt><dd>{gesamtbezuege_2014}</dd>\
        <dt>Bilanzsumme</dt><dd>{bilanzsumme_2014}</dd>\
        <dt>Mitarbeiter</dt><dd>{mitarbeiter_2014}</dd>\
        <dt>Vorstände</dt><dd>{anzahl_vorstaende_2014}</dd></dl>'
    },
    nvd3: {
      color: [correctivColors.red]
    }
  },
  data: {
    xCol: 'bemessung_2014',
    yCol: 'durchschnitt_val',
    sizeCol: 'mitarbeiter_val',
    groupCol: 'state'
  }
});

renderChart({
  selector: '#vorstaende-chart--2',
  kind: 'scatterChart',
  dataUrl: 'data/sample.csv',
  chart: {
    height: '600px',
    zoom: {
      active: true
    },
    tooltip: {
      labelCol: 'sparkasse',
      bodyTempl: '<dl>\
        <dt>Durchschnittsgehalt</dt><dd>{durchschnittsgehalt_2014}</dd>\
        <dt>Gesamtbezüge</dt><dd>{gesamtbezuege_2014}</dd>\
        <dt>Bilanzsumme</dt><dd>{bilanzsumme_2014}</dd>\
        <dt>Mitarbeiter</dt><dd>{mitarbeiter_2014}</dd>\
        <dt>Vorstände</dt><dd>{anzahl_vorstaende_2014}</dd></dl>'
    },
    nvd3: {
      color: [correctivColors.red, correctivColors.blue]
    }
  },
  data: {
    xCol: 'bemessung_2014',
    yCol: 'durchschnitt_val',
    sizeCol: 'mitarbeiter_val',
    groupCol: 'state',
    filter: function(row) {
      return (row.state === 'Nordrhein-Westfalen') || (row.state === 'Bayern');
    }
  }
});


renderChart({
  selector: '#vorstaende-chart--3',
  kind: 'discreteBarChart',
  dataUrl: 'data/sample_barchart.csv',
  chart: {
    height: '600px',
    tooltip: {
      labelCol: 'name',
      bodyTempl: '<dl>\
        <dt>Sparkasse</dt><dd>{sparkasse}</dd>\
        <dt>Gesamtverguetung</dt><dd>{gesamtverguetung}</dd>\
        <dt>Erfolgsabhängige Bezüge</dt><dd>{erfolgsabhaengige_bezuege}</dd>\
        <dt>Position</dt><dd>{position}</dd>\
        <dt>Bundesland</dt><dd>{state}</dd></dl>'
    },
    nvd3: {
      color: function(r) {
        if (r.data.state === 'Hessen') {
          return correctivColors.blue;
        } else {
          return correctivColors.red;
        }
      },
      showXAxis: false
    }
  },
  data: {
    labelCol: 'name',
    valueCol: 'bezuege_quote_zu_2013',
    filter: function(r) {
      return (r.state === 'Hessen') || (r.state === 'Nordrhein-Westfalen');
    }
  }
});


  </script>
</body>
</html>
