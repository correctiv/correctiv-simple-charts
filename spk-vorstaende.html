<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>correctiv-simple-charts</title>
</head>
<body>
  <h1>Vorstände - Datenauswertung</h1>

  <h2>Durchschnittsgehalt pro Sparkasse</h2>
  <section class="simple-charts">
    <section id="vorstaende-chart--1"></section>
  </section>

  <h3>Vergleich NRW &amp; Bayern</h3>
  <section class="simple-charts">
    <section id="vorstaende-chart--2"></section>
  </section>

  <h2>Erfolgsabhängige Quote</h2>
  <p>Rot: Vorsitz, Blau: (stv.) Mitglied</p>
  <section class="simple-charts">
    <section id="vorstaende-chart--4"></section>
  </section>

  <h3>Vorstände, bei denen der Anteil erfolgsabhäniger Bezüge am Gesamtgehalt mehr als 15% beträgt.</h3>
  <section class="simple-charts">
    <section id="vorstaende-chart--3"></section>
  </section>

  <h3>Anteil erfolgsabhängige Bezüge an Gesamtvergütung</h3>
  <h4>absolut</h4>
  <section class="simple-charts">
    <section id="vorstaende-chart--5"></section>
  </section>

  <h4>relativ</h4>
  <section class="simple-charts">
    <section id="vorstaende-chart--6"></section>
  </section>

  <script src="https://correctiv.org/static/vendor/d3/d3.min.js"></script>
  <script src="https://cdn.rawgit.com/novus/nvd3/v1.8.1/build/nv.d3.min.js"></script>
  <script src="dist/correctiv-simple-charts.min.js"></script>
  <script type="text/javascript">

renderChart({
  selector: '#vorstaende-chart--1',
  kind: 'scatterChart',
  dataUrl: 'data/sample.csv',
  chart: {
    height: '600px',
    zoom: {
      active: true
    },
    tooltip: {
      labelCol: 'sparkasse',
      bodyTempl: '<dl>\
        <dt>Durchschnittsgehalt</dt><dd>{durchschnittsgehalt_2014}</dd>\
        <dt>Gesamtbezüge</dt><dd>{gesamtbezuege_2014}</dd>\
        <dt>Bilanzsumme</dt><dd>{bilanzsumme_2014}</dd>\
        <dt>Mitarbeiter</dt><dd>{mitarbeiter_2014}</dd>\
        <dt>Vorstände</dt><dd>{anzahl_vorstaende_2014}</dd></dl>'
    }
  },
  data: {
    xCol: 'bemessung_2014',
    yCol: 'durchschnitt_val',
    sizeCol: 'mitarbeiter_val',
    groupCol: 'state'
  }
});

renderChart({
  selector: '#vorstaende-chart--2',
  kind: 'scatterChart',
  dataUrl: 'data/sample.csv',
  chart: {
    height: '600px',
    zoom: {
      active: true
    },
    tooltip: {
      labelCol: 'sparkasse',
      bodyTempl: '<dl>\
        <dt>Durchschnittsgehalt</dt><dd>{durchschnittsgehalt_2014}</dd>\
        <dt>Gesamtbezüge</dt><dd>{gesamtbezuege_2014}</dd>\
        <dt>Bilanzsumme</dt><dd>{bilanzsumme_2014}</dd>\
        <dt>Mitarbeiter</dt><dd>{mitarbeiter_2014}</dd>\
        <dt>Vorstände</dt><dd>{anzahl_vorstaende_2014}</dd></dl>'
    },
    nvd3: {
      color: ['red', 'blue']
    }
  },
  data: {
    xCol: 'bemessung_2014',
    yCol: 'durchschnitt_val',
    sizeCol: 'mitarbeiter_val',
    groupCol: 'state',
    filter: function(row) {
      return (row.state === 'Nordrhein-Westfalen') || (row.state === 'Bayern');
    }
  }
});

renderChart({
  selector: '#vorstaende-chart--3',
  kind: 'discreteBarChart',
  dataUrl: 'data/sample_barchart_o15.csv',
  chart: {
    height: '400px',
    tooltip: {
      labelCol: 'name',
      bodyTempl: '<dl>\
        <dt>Sparkasse</dt><dd>{sparkasse}</dd>\
        <dt>Gesamtverguetung</dt><dd>{gesamtverguetung}</dd>\
        <dt>Erfolgsabhängige Bezüge</dt><dd>{erfolgsabhaengige_bezuege}</dd>\
        <dt>Position</dt><dd>{position}</dd></dl>'
    },
    xAxis: {
      tickFormat: ''
    },
    nvd3: {
      color: function(obj) {
        return obj.data.position.indexOf('Mitglied') > -1 ? 'blue' : 'red';
      }
    }
  },
  data: {
    labelCol: 'name',
    valueCol: 'bezuege_quote_zu_2013'
  }
});



renderChart({
  selector: '#vorstaende-chart--4',
  kind: 'discreteBarChart',
  dataUrl: 'data/sample_barchart.csv',
  chart: {
    height: '400px',
    tooltip: {
      labelCol: 'name',
      bodyTempl: '<dl>\
        <dt>Sparkasse</dt><dd>{sparkasse}</dd>\
        <dt>Gesamtverguetung</dt><dd>{gesamtverguetung}</dd>\
        <dt>Erfolgsabhängige Bezüge</dt><dd>{erfolgsabhaengige_bezuege}</dd>\
        <dt>Position</dt><dd>{position}</dd></dl>'
    },
    xAxis: {
      tickFormat: ''
    },
    nvd3: {
      color: function(obj) {
        return obj.data.position.indexOf('Mitglied') > -1 ? 'blue' : 'red';
      }
    }
  },
  data: {
    labelCol: 'name',
    valueCol: 'bezuege_quote_zu_2013'
  }
});


renderChart({
  selector: '#vorstaende-chart--5',
  kind: 'multiBarChart',
  dataUrl: 'data/sample_multibar.csv',
  chart: {
    height: '400px',
    tooltip: {
      labelCol: 'name',
      bodyTempl: '<dl>\
        <dt>Sparkasse</dt><dd>{sparkasse}</dd>\
        <dt>Gesamtverguetung</dt><dd>{gesamtverguetung}</dd>\
        <dt>Erfolgsabhängige Bezüge</dt><dd>{erfolgsabhaengige_bezuege}</dd>\
        <dt>Position</dt><dd>{position}</dd></dl>'
    },
    nvd3: {
      color: ['blue', 'red'],
      showXAxis: false,
      stacked: true
    }
  },
  data: {
    labelCol: 'name',
    xCol: 'name',
    yCol: 'value',
    groupCol: 'group'
  }
});


renderChart({
  selector: '#vorstaende-chart--6',
  kind: 'multiBarHorizontalChart',
  dataUrl: 'data/sample_multibar2.csv',
  chart: {
    height: '900px',
    tooltip: {
      labelCol: 'name',
      bodyTempl: '<dl>\
        <dt>Sparkasse</dt><dd>{sparkasse}</dd>\
        <dt>Gesamtverguetung</dt><dd>{gesamtverguetung}</dd>\
        <dt>Erfolgsabhängige Bezüge</dt><dd>{erfolgsabhaengige_bezuege}</dd>\
        <dt>Position</dt><dd>{position}</dd></dl>'
    },
    nvd3: {
      color: ['blue', 'red'],
      showControls: false,
      showLegend: false,
      showXAxis: false,
      stacked: true
    }
  },
  data: {
    labelCol: 'name',
    xCol: 'name',
    yCol: 'value',
    groupCol: 'group'
  }
});

  </script>
</body>
</html>
